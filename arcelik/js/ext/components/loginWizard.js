var bdy=$("body"),loginWizardFN={el:{inputPass:'.password:not(.password-v2) [type="password"], .password:not(.password-v2) [data-attr="password"]',showPassButton:".password .wrp i",signupBtn:".signup-btn .btn",guestBtn:".guest-btn .btn",signupProgress:".progress.signup",backButton:".signup .prg-back button",guestBackBtn:".guest .prg-back button, .btn-login-back",prgSummary:".prg-summary",prtsStep:".prg-step",stepBtn:".progress .next > button",formRow:".form-row",completeButton:".btn-signup-complete",chkConfirm:".form-row.confirm",newInput:".default-input input, .default-input textarea"},cls:{showPass:"show-pass",signupReady:"signup-ready",signupComplete:"signup-complete",guestReady:"guest-ready",formErr:"form-error",formScs:"form-success"},passCheck:{length:!1,alpha:!1,numeric:!1},checkPasswordStrength:function(t){var e=t.closest(".form-row").find(".indicator"),s=(t.val()||"").trim(),a=0,r=new Array;r.push("[A-Z]"),r.push("[a-z]"),r.push("[0-9]"),r.push("[$@$!%*#?&]");for(var o=0;o<r.length;o++)new RegExp(r[o]).test(s)&&a++;2<a&&s.length>=SITE_CONSTANT.minPasswordLength&&a++,e.attr("data-level",a=5<=a?4:a)},checkPasswordStrengthV2:function(input){var value=input.val(),rulesItems=input.closest(".form-row").find(".password-rules .item"),ruleCheckCount=0,formRow=(input.toggleClass("hasValue",value),rulesItems.each(function(i,elm){var regexString=$(elm).data("regex");$(elm).data("regex-variable")&&(regexString=eval($(elm).data("regex-variable")));try{var regex=new RegExp(regexString);regex.test(value)?($(elm).addClass("active"),ruleCheckCount++):$(elm).removeClass("active")}catch(error){console.error("Invalid regex string:",regexString)}}),input.closest(".form-row")),passwordStrength=formRow.find(".password-strength");ruleCheckCount===rulesItems.length?(passwordStrength.removeClass("active"),formRow.addClass("form-success")):(passwordStrength.addClass("active"),formRow.removeClass("form-success")),this.indicatorStrength(input)},indicatorStrength:function(t){var e=t.closest(".form-row").find(".indicator"),s=t.val(),t=t.closest(".form-row").find(".password-rules .item"),a=1,r=!0;t.each(function(t,e){$(e).data("rule");e=$(e).data("regex");try{new RegExp(e).test(s)||(r=!1)}catch(t){console.error("Invalid regex string:",e)}}),r&&(a=2,12<=s.length)&&(a=3),r&&16<=s.length&&(a=4),a=Math.min(a,4),e.attr("data-level",a)},validation:function(t){var n=this,e=$("[required]",t),l=!0;return t.find(n.el.formRow).removeClass(n.cls.formErr),e.each(function(){var t=$(this),e=t.parents(n.el.formRow),s=(o=(t.val()||"").trim()).length,a=t.attr("data-attr")||"";if(t.is('[type="checkbox"]')&&!t.is(":checked"))e.addClass(n.cls.formErr),l=!1;else if(0==s&&(e.addClass(n.cls.formErr),l=!1),0<s&&""!=a)switch(a){case"email":(r=/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(o)||(e.addClass(n.cls.formErr),l=!1);break;case"phone":var r=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,3})|(\(?\d{2,3}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/g,o=o.replace(/\./g,"").replace(/\)/g,"").replace(/\(/g,"").replace(/\s+/g,"");r.test(o)||(e.addClass(n.cls.formErr),l=!1);break;case"password":(r=/^.{6,}$/).test(o)||(e.addClass(n.cls.formErr),l=!1)}}),l},validationV2:function(t){var e=this,s=!0,a=t.closest(".form-row"),r=t.data("attr"),o=t.val(),n=t.data("language");if(t.is('[type="checkbox"]')&&!t.is(":checked"))$(a).addClass(e.cls.formErr),s=!1;else if(o&&r)switch(r){case"email":/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(o)?($(a).addClass(e.cls.formScs),$(a).removeClass(e.cls.formErr)):($(a).addClass(e.cls.formErr),$(a).removeClass(e.cls.formScs),s=!1);break;case"phone":if("email-phone"==t.data("selector"))return;("pk"==n?/^\+92-3([0-9]{2})-([0-9]{7})$/:/^05\d{9}$/).test(o)?($(a).addClass(e.cls.formScs),$(a).removeClass(e.cls.formErr)):($(a).addClass(e.cls.formErr),$(a).removeClass(e.cls.formScs),s=!1)}return s},addEvent:function(){var s=this,a=($(s.el.newInput).on("input",function(){s.validationV2($(this))}),$(s.el.showPassButton).on("click",function(t){t.preventDefault();var t=$(this),e=t.siblings("input");t.hasClass(s.cls.showPass)?(t.removeClass(s.cls.showPass),e.prop("type","password")):(t.addClass(s.cls.showPass),e.prop("type","text"))}),$(s.el.inputPass).on("keyup paste",function(){s.checkPasswordStrength($(this))}),$('.password [type="password"]').on("keyup paste",function(){s.checkPasswordStrengthV2($(this))}),$('.password [type="password"]').on("focus",function(){$(this).closest(".form-row").find(".password-strength").addClass("active")}).on("blur",function(){$(this).closest(".form-row").find(".password-strength").removeClass("active")}),$(s.el.signupBtn).on("click",function(){isMobile&&utils.pageScroll({top:0}),bdy.addClass(s.cls.signupReady)}),$(s.el.guestBtn).on("click",function(){isMobile&&utils.pageScroll({top:0}),bdy.addClass(s.cls.guestReady)}),$(s.el.guestBackBtn).on("click",function(){bdy.removeClass(s.cls.guestReady)}),$(s.el.signupProgress)),r=$(s.el.prgSummary);$(s.el.stepBtn).on("click",function(){var t,e=$(this).parents(s.el.prtsStep);isMobile&&utils.pageScroll({top:0}),s.validation(e)&&(3!=(t=(e=parseFloat(a.attr("data-total")||"3"))<(t=parseFloat(a.attr("data-step")||"1")+1)?e:t)||isDemoHTML)&&(a.attr("data-step",t),r.attr("data-step",t))}),$(s.el.backButton).on("click",function(){var t=parseFloat(a.attr("data-step")||"1");1==t?bdy.removeClass(s.cls.signupReady):(a.attr("data-step",t=--t<=1?1:t),r.attr("data-step",t))}),$(s.el.completeButton).on("click",function(){bdy.addClass(s.cls.signupComplete)})},usernameCleave:"",username:{inputStates:{},init:function(){this.events()},formatInputValue:function(t,e){return t="pk"===e?t.replace(/^(\+92-3\d{2}-\d{7}).*$/,"$1").slice(0,17):t.replace(/^(05\d{9}).*$/,"$1").slice(0,11)},formatter:function(t,e){var s=t.val(),a=t.data("language"),r=this.inputStates[t.attr("id")]||{firstKeyUse:!1};/^[0-9+\-]+$/.test(s)?(r.firstKeyUse?(s=this.formatInputValue(s,a),t.val(s)):(t.val("pk"===a?"+92-3":"05"),r.firstKeyUse=!0),e&&t.attr("data-attr","phone")):(r.firstKeyUse=!1,e&&(this.autocompleteSuggest($(t)),t.attr("data-attr","email"))),this.inputStates[t.attr("id")]=r},autocompleteSuggest:function(t){var s,e,a;"undefined"!=typeof mailProvider&&(e=(s=t.val().toLowerCase()).split("@"),a=t.closest(".ac-container").find(".email-autocomplete"),a=$(a),2<s.length&&!s.includes(e[1])?(a.find("ul").empty(),$.each(mailProvider,function(t,e){e='<li><a href="#">'+s+"@"+e+"</a></li>";a.find("ul").append(e)}),a.addClass("active")):(a.removeClass("active"),a.find("ul").empty()))},autocomplete:function(t){var e=t.closest(".form-row").find("input"),s=t.text().trim(),s=($(e).val(s),$(e).trigger("input"),t.closest(".ac-container").find(".email-autocomplete"));$(s)},resetAll:function(t){var e=$(".email-autocomplete");e.removeClass("active"),e.find("ul").empty()},events:function(){var e=this;$(document).on("input",'[data-selector="email-phone"]',function(t){e.formatter($(this),!0)}),$(document).on("input",'.default-input [data-attr="phone"]',function(t){e.formatter($(this))}),$(document).on("input","[data-autocomplete]",function(t){e.autocompleteSuggest($(this))}),$(document).on("click",".email-autocomplete a",function(t){t.preventDefault(),e.autocomplete($(this))}),$(document).on("click tap",function(t){$(t.target).closest(".email-autocomplete").length||e.resetAll($(t.target))})}},init:function(){this.addEvent(),this.username.init()}};