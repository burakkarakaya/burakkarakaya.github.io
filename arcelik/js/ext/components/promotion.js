var promotionFN={el:{tabPanel:".tab-pane",activeTabPanel:".promo-tabs .nav-link.active",item:".prd-mini",btn:".prd-mini .prd-mini-detail-left",promoSelections:".promo-selections .promo-rows",promoRemoveBtn:".btn-remove",promoItem:".prd-row"},cls:{selected:"selected",active:"activeted"},template:'<div class="prd-row"> <div class="prd-row-inner"> <div class="prd-row-media"> <figure class="responsive"><img srcset="{{src}}"></figure> </div><div class="prd-row-block1"> <div class="prd-row-name">{{name}}</div><div class="prd-row-price">{{price}}</div></div><div class="prd-row-block2"> <button class="btn-remove" type="button"></button> </div></div></div>',checkSelectedProduct:function(){var r=this,e=wrp.find(".promo-tab-contents > .tab-pane").length,t=wrp.find(".promo-tab-contents .prd-mini.selected"),n=[];t.each(function(){var e=$(this),t=e.find(".responsive > img").attr("data-srcset")||"",i=(e.find(".prd-mini-name").html()||"").trim(),e=(e.find(".prd-mini-price").html()||"").trim();n.push(r.template.replace(/{{src}}/g,t).replace(/{{name}}/g,i).replace(/{{price}}/g,e))}),wrp.find(r.el.promoSelections).html(n.join(" ")),wrp.find(r.el.promoRemoveBtn).off("click").on("click",function(){var e=$(this).parents(r.el.promoItem),i=(e.find(".prd-row-name").text()||"").trim();wrp.find(r.el.item).each(function(){var e=$(this),t=(e.find(".prd-mini-name").text()||"").trim();i==t&&e.removeClass(r.cls.selected)}),e.remove()}),t.length==e?wrp.addClass(r.cls.active):wrp.removeClass(r.cls.active)},addEvent:function(i){var r=this;i.find(r.el.btn).on("click",function(){var e=$(this),t=e.parents(r.el.tabPanel).eq(0).find(r.el.item),e=e.parents(r.el.item);e.hasClass(r.cls.selected)?t.removeClass(r.cls.selected):(t.removeClass(r.cls.selected),e.addClass(r.cls.selected),0<(t=i.find(r.el.activeTabPanel).next()).length?t.trigger("click"):utils.pageScroll({top:i.find(r.el.promoSelections).offset().top-150})),r.checkSelectedProduct(i)})},init:function(e){this.addEvent(e)}};