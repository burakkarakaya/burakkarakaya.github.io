class Cocoen{constructor(e,t){this.options=Object.assign({},Cocoen.defaults,t),this.element=e||document.querySelector(".cocoen"),this.init()}init(){this.createElements(),this.addEventListeners(),this.dimensions()}createElements(){var e=document.createElement("span");e.className=this.options.dragElementSelector.replace(".",""),this.element.appendChild(e),this.dragElement=this.element.querySelector(this.options.dragElementSelector),this.beforeElement=this.element.querySelector(".cocoen-first"),this.beforeImage=this.beforeElement.querySelector("img, video")}addEventListeners(){this.element.addEventListener("click",this.onTap.bind(this)),this.element.addEventListener("mousemove",this.onDrag.bind(this)),this.element.addEventListener("touchmove",this.onDrag.bind(this)),this.dragElement.addEventListener("mousedown",this.onDragStart.bind(this)),this.dragElement.addEventListener("touchstart",this.onDragStart.bind(this)),window.addEventListener("mouseup",this.onDragEnd.bind(this)),window.addEventListener("resize",this.dimensions.bind(this))}dimensions(){this.elementWidth=parseInt(window.getComputedStyle(this.element).width,10),this.elementOffsetLeft=this.element.getBoundingClientRect().left+document.body.scrollLeft,this.dragElementWidth=parseInt(window.getComputedStyle(this.dragElement).width,10),this.minLeftPos=this.elementOffsetLeft+10,this.maxLeftPos=this.elementOffsetLeft+this.elementWidth-this.dragElementWidth-10}onTap(e){e.preventDefault(),this.leftPos=e.pageX||e.touches[0].pageX,this.requestDrag()}onDragStart(e){e.preventDefault();var e=e.pageX||e.touches[0].pageX,t=this.dragElement.getBoundingClientRect().left+document.body.scrollLeft;this.posX=t+this.dragElementWidth-e,this.isDragging=!0}onDragEnd(e){e.preventDefault(),this.isDragging=!1}onDrag(e){e.preventDefault(),this.isDragging&&(this.moveX=e.pageX||e.touches[0].pageX,this.leftPos=this.moveX+this.posX-this.dragElementWidth,this.requestDrag())}drag(){this.leftPos<this.minLeftPos?this.leftPos=this.minLeftPos:this.leftPos>this.maxLeftPos&&(this.leftPos=this.maxLeftPos);var e=this.leftPos+this.dragElementWidth/2-this.elementOffsetLeft,t=100*(e/=this.elementWidth)+"%";this.dragElement.style.left=t,this.beforeElement.style.width=t,this.options.dragCallback&&this.options.dragCallback(e)}requestDrag(){window.requestAnimationFrame(this.drag.bind(this))}}Cocoen.defaults={dragElementSelector:".cocoen-drag",dragCallback:null};